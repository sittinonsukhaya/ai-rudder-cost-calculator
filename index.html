<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Rudder Cost Calculator</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <!-- Custom Styles (no Tailwind, no Feather Icons) -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <div class="app-container">

    <!-- Header -->
    <div class="card header">
      <div class="header-brand">
        <img src="https://airudder.com/wp-content/themes/airudder-theme/assets/images/logo-footer.webp" alt="AI Rudder" class="header-logo">
        <div class="header-divider"></div>
        <div>
          <h1 data-i18n="header.title">Cost Calculator</h1>
          <p class="header-subtitle" data-i18n="header.subtitle">Interactive ROI Analysis for Collaborative Sales Sessions</p>
        </div>
      </div>
      <div class="header-actions">
        <div class="lang-toggle">
          <button id="langEn" class="active" data-lang="en">EN</button>
          <button id="langTh" data-lang="th">TH</button>
        </div>
        <a href="user-guide.html" class="btn btn-secondary" style="text-decoration: none;">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
          <span data-i18n="btn.guide">Guide</span>
        </a>
        <select id="scenarioDropdown">
          <option value="" data-i18n="misc.selectScenario">Select a scenario...</option>
        </select>
        <button id="saveScenarioBtn" class="btn btn-secondary">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
          <span data-i18n="btn.save">Save</span>
        </button>
        <button id="loadScenarioBtn" class="btn btn-secondary">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
          <span data-i18n="btn.load">Load</span>
        </button>
        <button id="deleteScenarioBtn" class="btn btn-danger">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
          <span data-i18n="btn.delete">Delete</span>
        </button>
      </div>
    </div>

    <!-- Two-Panel Layout -->
    <div class="layout-grid">

      <!-- ===== LEFT: INPUT PANEL ===== -->
      <div class="input-panel">

        <!-- Section 1: Client Operations -->
        <div class="card">
          <div class="card-header">
            <div>
              <h2 data-i18n="section.clientOps">Client Operations</h2>
              <p class="card-description" data-i18n="section.clientOpsDesc">Describe the client's current operation</p>
            </div>
          </div>

          <div class="grid-2" style="margin-bottom: 20px;">
            <div class="field-group">
              <label class="field-label">
                <span data-i18n="field.totalAgents">Total Current Agents</span>
                <span class="field-description" data-i18n="field.totalAgentsDesc">Number of human agents handling customer interactions</span>
              </label>
              <input type="number" id="totalAgents" value="100" min="0" step="1">
            </div>
            <div class="field-group">
              <label class="field-label">
                <span data-i18n="field.monthlySalary">Avg Monthly Salary per Agent</span>
                <span class="field-description" data-i18n="field.monthlySalaryDesc">Including benefits and overhead per agent</span>
              </label>
              <input type="number" id="monthlySalary" value="25000" min="0" step="1000">
            </div>
          </div>

          <h3 style="font-size: 15px; font-weight: 600; margin-bottom: 12px;" data-i18n="section.channels">Channels</h3>
          <div id="channelsContainer">
            <!-- Rendered by ui.js -->
          </div>
          <button id="addChannelBtn" class="btn btn-primary btn-sm">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            <span data-i18n="btn.addChannel">Add Channel</span>
          </button>
        </div>

        <!-- Section 2: Rates Comparison -->
        <div class="card">
          <div class="card-header">
            <div>
              <h2 data-i18n="section.rates">Rates Comparison</h2>
              <p class="card-description" data-i18n="section.ratesDesc">Compare per-interaction costs. AI Bot Rate applies to deflected interactions, AI Agent Rate to human-assisted ones.</p>
            </div>
          </div>
          <div id="ratesContainer">
            <!-- Rendered by ui.js -->
          </div>
        </div>

        <!-- Section 3: Additional Costs -->
        <div class="card">
          <div class="card-header">
            <div>
              <h2 data-i18n="section.additionalCosts">Additional Costs</h2>
              <p class="card-description" data-i18n="section.additionalCostsDesc">Add any other operating costs not covered above</p>
            </div>
          </div>
          <div class="cost-columns">
            <div class="cost-column">
              <h3 data-i18n="section.clientState">Client Current State</h3>
              <div id="clientItems">
                <!-- Rendered by ui.js -->
              </div>
              <button class="btn btn-primary btn-sm" data-action="add-item" data-side="client">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                <span data-i18n="btn.addCostItem">Add Cost Item</span>
              </button>
            </div>
            <div class="cost-column">
              <h3 data-i18n="section.aiSolution">AI Rudder Solution</h3>
              <div id="aiItems">
                <!-- Rendered by ui.js -->
              </div>
              <button class="btn btn-primary btn-sm" data-action="add-item" data-side="ai">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                <span data-i18n="btn.addCostItem">Add Cost Item</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Section 4: AI Rudder Configuration -->
        <div class="card">
          <div class="card-header">
            <div>
              <h2 data-i18n="section.aiConfig">AI Rudder Configuration</h2>
              <p class="card-description" data-i18n="section.aiConfigDesc">Configure how AI Rudder handles customer interactions</p>
            </div>
          </div>

          <!-- Deflection Rate -->
          <div style="margin-bottom: 20px;">
            <div class="slider-container">
              <label class="field-label" style="margin-bottom: 0;">
                <span data-i18n="field.deflectionRate">AI Deflection Rate</span>
                <span class="field-description" data-i18n="field.deflectionRateDesc">Percentage of interactions fully handled by AI without human intervention</span>
              </label>
              <span id="deflectionValue" class="deflection-value">20%</span>
            </div>
            <input type="range" id="deflectionRate" class="slider" min="0" max="80" value="20" step="1">
          </div>

          <!-- AI Handle Times -->
          <div class="grid-2">
            <div class="field-group">
              <label class="field-label">
                <span data-i18n="field.voiceAiHandleTime">Voice AI Handle Time (Min)</span>
                <span class="field-description" data-i18n="field.voiceAiHandleTimeDesc">Average duration when AI handles a voice call</span>
              </label>
              <input type="number" id="aiHandleTime" value="3.5" min="0" step="0.1">
            </div>
            <div class="field-group">
              <label class="field-label">
                <span data-i18n="field.chatAiHandleTime">Chat AI Handle Time (Min)</span>
                <span class="field-description" data-i18n="field.chatAiHandleTimeDesc">Average duration when AI handles a chat session</span>
              </label>
              <input type="number" id="chatAiHandleTime" value="2" min="0" step="0.1">
            </div>
          </div>
        </div>

        <!-- Section 5: Efficiency Offset -->
        <div class="card">
          <div class="card-header">
            <div>
              <h2 data-i18n="section.efficiency">Efficiency Offset</h2>
              <p class="card-description" data-i18n="section.efficiencyDesc">Estimate additional hours saved through back-office automation</p>
            </div>
          </div>

          <!-- Admin Hours -->
          <div style="max-width: 400px;">
            <div class="field-group">
              <label class="field-label">
                <span data-i18n="field.adminHours">Hours Saved by Automation</span>
                <span class="field-description" data-i18n="field.adminHoursDesc">Total hours/month freed by AI — e.g. autodialing, queue handling, admin tasks</span>
              </label>
              <input type="number" id="adminHours" value="160" min="0" step="10">
            </div>
          </div>
        </div>

      </div>

      <!-- ===== RIGHT: OUTPUT PANEL (sticky) ===== -->
      <div class="output-panel">

        <!-- Dashboard Metrics -->
        <div class="card">
          <h2 style="margin-bottom: 16px;" data-i18n="section.dashboard">Dashboard</h2>

          <!-- COST COMPARISON -->
          <h3 class="dashboard-section-title" data-i18n="metric.costComparison">Cost Comparison</h3>
          <div class="dashboard-grid">
            <div class="metric-card">
              <div class="metric-label" data-i18n="metric.currentMonthly">Current Operations Cost</div>
              <div id="metricClientMonthly" class="metric-value" style="color: var(--client-legacy);">฿0</div>
              <div id="metricClientPerInteraction" class="metric-hint"></div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metric.aiMonthly">Operations Cost with AI Rudder</div>
              <div id="metricAIMonthly" class="metric-value blue">฿0</div>
              <div id="metricAIPerInteraction" class="metric-hint"></div>
            </div>
          </div>

          <!-- DIRECT SAVINGS -->
          <h3 class="dashboard-section-title" data-i18n="metric.directSavings">Direct Savings</h3>
          <div class="dashboard-grid">
            <div class="metric-card">
              <div class="metric-label" data-i18n="metric.monthlySavings">Monthly Savings</div>
              <div id="metricMonthlySavings" class="metric-value savings">฿0</div>
              <div class="metric-hint" data-i18n="metric.monthlySavingsHint">Direct operational cost reduction</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metric.costReduction">Cost Reduction</div>
              <div id="metricCostReduction" class="metric-value savings">0%</div>
              <div class="metric-hint" data-i18n="metric.costReductionHint">Percentage of current cost saved</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metric.initialInvestment">Initial Investment</div>
              <div id="metricInitialInvestment" class="metric-value">฿0</div>
              <div class="metric-hint" data-i18n="metric.initialInvestmentHint">One-time setup costs</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metric.breakEven">Break-Even</div>
              <div id="metricBreakEven" class="metric-value blue">-</div>
              <div class="metric-hint" data-i18n="metric.breakEvenHint">When cumulative savings exceed investment</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metric.year1Savings">Year 1 Net Savings</div>
              <div id="metricYear1Savings" class="metric-value savings">฿0</div>
              <div class="metric-hint" data-i18n="metric.year1SavingsHint">12 months of direct savings minus investment</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metric.roi">ROI</div>
              <div id="metricROI" class="metric-value savings">-</div>
              <div class="metric-hint" data-i18n="metric.roiHint">Return on initial investment in Year 1</div>
            </div>
          </div>

          <!-- EFFICIENCY GAINS -->
          <h3 class="dashboard-section-title" data-i18n="efficiency.title">Efficiency Gains</h3>
          <div class="dashboard-grid">
            <div class="metric-card">
              <div class="metric-label" data-i18n="efficiency.agentsFreed">Agents Freed Up</div>
              <div id="metricAgentsFreed" class="metric-value blue">-</div>
              <div id="metricAgentsFreedHint" class="metric-hint"></div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="efficiency.hoursReclaimed">Hours Reclaimed</div>
              <div id="metricHoursReclaimed" class="metric-value">-</div>
              <div id="metricHoursReclaimedHint" class="metric-hint"></div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="efficiency.extraCapacity">Extra Serving Capacity</div>
              <div id="metricExtraCapacity" class="metric-value teal-text">-</div>
              <div id="metricExtraCapacityHint" class="metric-hint"></div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="efficiency.capacityIncrease">Capacity Increase</div>
              <div id="metricCapacityIncrease" class="metric-value teal-text">-</div>
              <div class="metric-hint" data-i18n="efficiency.capacityIncreaseHint">Team throughput gained</div>
            </div>
            <div class="metric-card full-width">
              <div class="metric-label" data-i18n="efficiency.estimatedValue">Estimated Value</div>
              <div id="metricEfficiencyValue" class="metric-value teal-text">฿0</div>
              <div class="metric-hint" data-i18n="efficiency.estimatedValueHint">Monetary value of reclaimed time</div>
            </div>
          </div>
        </div>

        <!-- ROI Chart -->
        <div class="card">
          <h2 style="margin-bottom: 8px;" data-i18n="section.chartTitle">24-Month Cost Comparison</h2>
          <p class="chart-description" data-i18n="section.chartDesc">Cumulative total costs over 24 months including channel costs, agent payroll, and additional costs. The green shaded area between the lines represents your savings with AI Rudder. Admin efficiency gains are additional savings reflected in the dashboard above.</p>
          <div class="chart-container">
            <canvas id="roiChart"></canvas>
          </div>
        </div>

      </div>

    </div>
  </div>

  <!-- Modal Overlay -->
  <div id="modalOverlay" class="modal-overlay">
    <div class="modal">
      <h3 id="modalTitle"></h3>
      <p id="modalMessage"></p>
      <input type="text" id="modalInput" style="display:none;" placeholder="">
      <div class="modal-actions">
        <button id="modalCancel" class="btn btn-secondary" data-i18n="btn.cancel">Cancel</button>
        <button id="modalConfirm" class="btn btn-primary" data-i18n="btn.confirm">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <!-- Single Module Entry Point -->
  <script type="module" src="js/app.js"></script>

</body>
</html>
